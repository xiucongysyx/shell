var RelatedPageRecommendationsClickback;(function(){function y(){var o,h,a,v,y,k,s;try{if(o=null,typeof rprData!="undefined"&&rprData)o=rprData.InsertId,f=rprData.IsInstrumentation,c=rprData.ShouldAddQueryToUrl;else{RPRShared.cLog(n,t,"RenderDataNotAvailable");return}if(h=RPRShared.isSessionStorageSupported()&&RPRShared.isPerformanceNavigationSupported(),a=nt(r),typeof _w!="undefined"&&h&&(v=sessionStorage.getItem(i),v&&tt()&&(u.lastLinkClicked=v,l(o,u),RPRShared.cLog(n,t,"QuickbackTriggered")),sessionStorage.removeItem(i)),typeof _w!="undefined"&&a&&sj_be(_d,r.visibilityChangedEventName,function(){return w(o,u)}),h||a)for(y=_ge(e).children,k=function(n){var t=y.item(n),i;b(t)&&(i=RPRShared.getLinkHref(t),i&&sj_be(t,"click",function(n){return!p(n)&&d(u,i)}))},s=0;s<y.length;s++)k(s);else RPRShared.cLog(n,t,"NoClickbackTriggerSupported")}catch(g){RPRShared.cLog(n,t,g?g.message:"Unknown Error")}}function p(n){var t,i;if(n===null||n===void 0?void 0:n.currentTarget)for(t=n.target;t&&t!==n.currentTarget;){for(i=0;i<h.length;i++)if(Lib.CssClass.contains(t,h[i]))return!0;t=t.parentElement}return!1}function w(u,f){try{var o=_d[r.hiddenProperty];f.lastLinkClicked&&(o?(RPRShared.cLog(n,t,"NewTabLoadTriggered"),l(u,f)):(RPRShared.cLog(n,t,"RevisitTriggered"),a(f),sessionStorage.removeItem(i)))}catch(e){RPRShared.cLog(n,t,e?e.message:"Unknown Error")}}function l(i,r){var h,l,v,e=r.lastLinkClicked,o,y,f,u,s,p;if(!((h=e===null||e===void 0?void 0:e.trim())===null||h===void 0?void 0:h.length)){RPRShared.cLog(n,t,"EmptyUrlDetected");return}if(o=RPRShared.getQuery(),!((l=o===null||o===void 0?void 0:o.trim())===null||l===void 0?void 0:l.length)){RPRShared.cLog(n,t,"EmptyQueryDetected");return}if(y=RPRShared.getContainerWidth(n,t),!y){RPRShared.cLog(n,t,"CouldNotGetContainerWidth");return}(f=r.linkStates[e]=(v=r.linkStates[e])!==null&&v!==void 0?v:{state:0,recommendationsHtml:undefined},f.state===0)&&(f.state=1,u=sj_gx(),u.onreadystatechange=function(){try{u.readyState===4&&u.status===200?(f.state=2,f.recommendationsHtml=u.responseText,a(r)):u.readyState===4&&u.status===204?f.state=2:(f.state=3,RPRShared.cLog(n,t,"AsyncLoadError - Status: ".concat(u.status," ").concat(u.statusText)))}catch(i){RPRShared.cLog(n,t,i?i.message:"Unknown Error")}},s="/relatedPageRecommendations?IID=".concat(i,"&IG=").concat(_G.IG),c&&(s+="&q=".concat(encodeURIComponent(o))),s=RPRShared.getRequestUrl(s),u.open("POST",s,!0),u.setRequestHeader("content-type","application/json"),u.timeout=1e4,p={url:e,query:o,containerWidth:y,pageSize:rprData.PageSize},u.send(JSON.stringify(p)))}function a(i){var a,c,v,y,p,w,b,d,u,g,h,it,rt,r;if(!k(i))return!1;u=i.lastLinkClicked;g=i.linkStates[u];i.lastLinkClicked=undefined;var tt=_ge(e),nt=tt.children,l=-1;for(h=0;h<tt.children.length;h++)if(it=RPRShared.getLinkHref(nt[h]),(u===null||u===void 0?void 0:u.length)&&it===u){l=h;break}if(l!==-1){if(rt=nt[l],f)RPRShared.cLog(n,"ClickbackAddedInst","");else{if(sj_appHTML(rt,g.recommendationsHtml),(a=rprData.CB)===null||a===void 0?void 0:a.ClickbackAnimationEnabled){if(r=(y=(v=(c=nt[l])===null||c===void 0?void 0:c.getElementsByClassName)===null||v===void 0?void 0:v.call(c,o))===null||y===void 0?void 0:y[0],!r)return;sb_ie||!RPRShared.detectCSSFeature("transition")?(RPRShared.runJsAnimation(r,(w=(p=rprData.CB)===null||p===void 0?void 0:p.ContainerHeight)!==null&&w!==void 0?w:s),Lib.CssClass.remove(r,"pagereco_anim")):(r.offsetHeight,r.style.opacity="1.0",r.style.maxHeight="".concat((d=(b=rprData.CB)===null||b===void 0?void 0:b.ContainerHeight)!==null&&d!==void 0?d:s,"px"));RPRShared.cLog(n,"ClickbackAnimStarted","")}RPRShared.cLog(n,"ClickbackAdded","")}return RPRShared.cLog(n,t,"InsertedRecommendations"),RPRShared.addDwellTimeLogging(n,t),g.recommendationsHtml=undefined,typeof rms=="undefined"||f||rms.start(),!0}return!1}function b(n){var t;return((t=n===null||n===void 0?void 0:n.className)===null||t===void 0?void 0:t.indexOf(v))>=0&&n.getElementsByClassName(o).length===0}function k(n){var t=n.linkStates[n.lastLinkClicked];return!_d[r.hiddenProperty]&&Boolean(t===null||t===void 0?void 0:t.recommendationsHtml)&&t.state===2}function d(n,t){(t===null||t===void 0?void 0:t.length)&&!n.linkStates[t]?(n.lastLinkClicked=t,RPRShared.trySetSessionStorageItem(i,n.lastLinkClicked)||(n.lastLinkClicked=undefined)):n.lastLinkClicked=undefined}function g(){var i=undefined,r=undefined,t,n;if("hidden"in _d)i="hidden",r="visibilitychange";else for(t=["webkit","moz","ms","o"],n=0;n<t.length;n++)if(t[n]+"Hidden"in _d){i=t[n]+"Hidden";r=t[n]+"visibilitychange";break}return{hiddenProperty:i,visibilityChangedEventName:r}}function nt(n){return!!(n&&n.hiddenProperty&&n.visibilityChangedEventName)}function tt(){var n,t,i,r,u;return"performance"in _w&&(((r=(i=(t=(n=_w.performance)===null||n===void 0?void 0:n.getEntriesByType)===null||t===void 0?void 0:t.call(n,"navigation"))===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.type)==="back_forward"||((u=_w.performance.navigation)===null||u===void 0?void 0:u.type)&&_w.performance.navigation.type===_w.performance.navigation.TYPE_BACK_FORWARD)}var i="qbClickedIdx",n="RPR.CB",t="ClickbackLog",e="b_results",v="b_algo",o="scs_child_rpr",s=199,h=["scs_exp","scs_iec"],f=!1,c=!1,r=g(),u={lastLinkClicked:undefined,linkStates:{}};y();_w.sj_evt&&sj_evt.fire("rpr_cb_load_init")})(RelatedPageRecommendationsClickback||(RelatedPageRecommendationsClickback={}))